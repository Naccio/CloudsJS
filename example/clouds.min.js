function createCloud(t,a,n,i,e,s){var o=n/2,h=i/2,d=document.createElement("canvas"),r=d.getContext("2d");d.width=n,d.height=i;for(let t=0;t<e;t++){var c=.75*Math.random(),l=Math.random()*Math.PI*2,u=Math.cos(l)*c*o,l=Math.sin(l)*c*h,c=o+u,m=h+l,u=Math.min(o-Math.abs(u),h-Math.abs(l))*getRandom(.5,1),l=r.createRadialGradient(c,m,0,c,m,u),x="rgba("+s.r+", "+s.g+", "+s.b+", ";l.addColorStop(0,x+s.a+")"),l.addColorStop(1,x+"0)"),r.fillStyle=l,r.beginPath(),r.arc(c,m,u,0,2*Math.PI,!0),r.fill()}return{x:t,y:a,w:n,h:i,canvas:d}}function drawCloud(t,a){a.drawImage(t.canvas,t.x-t.w/2,t.y-t.h/2)}export default class Clouds{#clouds=[];#wind=0;#sky="rgba(0,0,0,0)";#running=!1;#lastUpdate;#context;#animationId;constructor(t){if(!(t instanceof HTMLCanvasElement))throw"Invalid HTML canvas.";this.#context=t.getContext("2d")}pause(){this.#running&&(this.#running=!1,cancelAnimationFrame(this.#animationId))}run(){this.#running||(this.#running=!0,this.#animationFrame())}setWindDirection(t){this.#wind=t}setSkyColor(t){this.#sky=t}add(t,a,n,i,e,s,o){t=createCloud(t,a,n,i,e,s);t.speed=o,this.#clouds.push(t)}draw(){var t=this.#context.canvas.width,a=this.#context.canvas.height;this.#context.clearRect(0,0,t,a),this.#context.fillStyle=this.#sky,this.#context.fillRect(0,0,t,a),this.#clouds.forEach(t=>drawCloud(t,this.#context))}#animate(t){var a=t-this.#lastUpdate;void 0!==this.#lastUpdate&&a<250&&(this.#update(a),this.draw()),this.#lastUpdate=t,this.#animationFrame()}#animationFrame(){this.#animationId=requestAnimationFrame(t=>this.#animate(t))}#update(h){this.#clouds.forEach(t=>{var a=this.#context,n=this.#wind,i=t.speed*h/1e3,e=Math.cos(n)*i,n=Math.sin(n)*i,i=t.w,s=t.h,o=a.canvas.width,a=a.canvas.height;t.x+=e,0<e&&t.x-i>o?t.x=0-i:e<0&&t.x+i<0&&(t.x=o+i),t.y+=n,0<n&&t.y-s>a?t.y=0-s:n<0&&t.y+s<0&&(t.y=a+s)})}}function getRandom(t,a){return Math.random()*(a-t)+t}export{createCloud,drawCloud};