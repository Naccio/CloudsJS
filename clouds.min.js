function getRandom(t,a){return Math.random()*(a-t)+t}function createCloud(t,a,n,i,e,s,o){var h=n/2,d=i/2,r=document.createElement("canvas"),c=r.getContext("2d");r.width=n,r.height=i;for(let t=0;t<e;t++){var l=.75*Math.random(),u=Math.random()*Math.PI*2,m=Math.cos(u)*l*h,u=Math.sin(u)*l*d,l=h+m,x=d+u,m=Math.min(h-Math.abs(m),d-Math.abs(u))*getRandom(.5,1),u=c.createRadialGradient(l,x,0,l,x,m),g="rgba("+s.r+", "+s.g+", "+s.b+", ";u.addColorStop(0,g+s.a+")"),u.addColorStop(1,g+"0)"),c.fillStyle=u,c.beginPath(),c.arc(l,x,m,0,2*Math.PI,!0),c.fill()}return{x:t,y:a,w:n,h:i,speed:o,color:s,canvas:r}}function drawCloud(t,a){a.drawImage(t.canvas,t.x-t.w/2,t.y-t.h/2)}export default class Clouds{#clouds=[];#wind=0;#sky="rgba(0,0,0,0)";#running=!1;#lastUpdate;#context;#animationId;constructor(t){if(!(t instanceof HTMLCanvasElement))throw"Invalid HTML canvas.";this.#context=t.getContext("2d")}pause(){this.#running&&(this.#running=!1,cancelAnimationFrame(this.#animationId))}run(){this.#running||(this.#running=!0,this.#aniamtionFrame())}setWindDirection(t){this.#wind=t}setSkyColor(t){this.#sky=t}add(t,a,n,i,e,s,o){t=createCloud(t,a,n,i,e,s,o);this.#clouds.push(t)}draw(){var t=this.#context.canvas.width,a=this.#context.canvas.height;this.#context.clearRect(0,0,t,a),this.#context.fillStyle=this.#sky,this.#context.fillRect(0,0,t,a),this.#clouds.forEach(t=>drawCloud(t,this.#context))}#animate(t){var a=t-this.#lastUpdate;void 0!==this.#lastUpdate&&a<250&&(this.#update(a),this.draw()),this.#lastUpdate=t,this.#aniamtionFrame()}#aniamtionFrame(){this.#animationId=requestAnimationFrame(t=>this.#animate(t))}#update(h){this.#clouds.forEach(t=>{var a=this.#context,n=this.#wind,i=t.speed*h/1e3,e=Math.cos(n)*i,n=Math.sin(n)*i,i=t.w,s=t.h,o=a.canvas.width,a=a.canvas.height;t.x+=e,0<e&&t.x-i>o?t.x=0-i:e<0&&t.x+i<0&&(t.x=o+i),t.y+=n,0<n&&t.y-s>a?t.y=0-s:n<0&&t.y+s<0&&(t.y=a+s)})}}export{createCloud,drawCloud};